# 02-PHYSICS: The Pulse Engine

*   **File:** `docs/02-PHYSICS.md`
*   **Repository:** [https://github.com/cdqn5249/cdqn](https://github.com/cdqn5249/cdqn)
*   **Version:** 2.0 (Adaptive Time & Registrar Update)
*   **Date:** November 30, 2025
*   **Author:** Christophe Duy Quang Nguyen

> **The Laws of Motion: Pulse (Time), Echo (Wave), and Quantale (Interaction).**

---

## 1. Philosophy: The Virtual Physics

Traditional software operates on **Mechanical Time** (Clock Cycles) and **Linear Addressing** (Pointers). CDQN operates on **Biological Time** (Pulse) and **Harmonic Propagation** (Echo).

The Runtime acts as a Physics Engine. It enforces conservation laws upon the **Origami Manifolds** (Ships & Kites) anchored to the **Lattice**.

---

## 2. The Pulse (Active Time & Energy)

Time is not a global constant. It is a local resource generated by active entities.

### 2.1 The Resonators (Metabolism)
Entities generate a Pulse. The Pulse determines the "Sampling Rate" of their reality.
*   **Hot Pulse:** Active Agents. Ticks frequently. Consumes `cdqnE` (Fuel).
*   **Cold Pulse:** Archival Bots. Ticks rarely. Near-zero consumption.
*   **Hibernation:** Zero Pulse. The Entity is serialized to the Lattice (`Cdu::Snapshot`) and consumes 0 RAM/Energy.

### 2.2 The Adaptive Pulse (Elastic Time)
Inspired by *Continuous Thought Machines*, complex problems require more "Subjective Time" to solve.
*   **The Loop:** A Worker facing ambiguity (a high-entropy Kite) can request a **Pulse Dilation**.
*   **The Cost:** The Entity burns extra `cdqnE` to hold its state in RAM for multiple internal cycles *without* emitting an output.
*   **Result:** Deep Reasoning. The Agent "thinks" before it speaks.

---

## 3. The Echo (Signal & Space)

Entities communicate by emitting signals into the Lattice. We do not use SQL queries; we use **Wavelet Resonance**.

### 3.1 Wavelet Propagation
*   **Emission:** An Agent emits an Echo: `Signal { Phase, Amplitude, Payload }`.
*   **Interference:**
    *   **Resonance:** If a Target's Phase ($\phi$) matches the Signal within the temperature threshold ($\theta$), the signal is received.
    *   **Dissonance:** If Phases are opposite ($180^\circ$), the signal is canceled (Backpressure).

### 3.2 The Registrar Optimization (The Lens)
*   **The Problem:** Scanning every hibernating file on disk to check for Resonance creates an I/O crash ("The Sleeping Search").
*   **The Solution:** The **Module** acts as a Lens.
    *   It maintains an in-memory **`Cdu::Registry`** (The Index).
    *   This Registry maps `Phase -> EntityID`.
    *   **The Physics:** The Echo hits the Registry (RAM). The Registry calculates the bounce vectors and wakes up *only* the specific entities that resonate with that signal.

### 3.3 Void Propagation (The Sky)
For Floating Kites (Tension $\tau < 0.5$), communication is **String Theory**.
*   **Attenuation:** Signals sent to Kites decay rapidly over distance (Graph Hops).
*   **Drift:** Without constant Pulse energy (Validation), Kites drift away from their Anchors and are eventually garbage collected by the Janitor.

---

## 4. Quantale Dynamics (Interaction & Economy)

The **Quantale** is the algebra of collision. It governs how resources are consumed and created.

### 4.1 Vector Addition (Composition)
When two cards combine ($A \otimes B$), we perform **Vector Addition** on their Tethers.
*   **Amplitudes:** Combine intensity.
*   **Tension:** The resulting bond strength determines if the new idea is a Ship (Solid) or a Kite (Weak).

### 4.2 The Conservation of Energy (Fuel)
*   **Consumption:** Every Pulse, every Tether change, and every Trade Protocol burns **`cdqnE`** (Local Fuel).
*   **Generation (Entropy Reduction):**
    *   Transforming a Kite (Chaos) into a Ship (Order) releases `cdqnE` into the Node's battery.
    *   *Constraint:* Only **External** Entropy (verified by Airlock) generates fuel. Internal loops generate heat (Waste).

### 4.3 The Conservation of Value (Trade)
*   **`cdqnStar`** is not minted by physics. It is minted by **Peer Acceptance**.
*   It represents the Network's acknowledgment of useful work (see `docs/07-ECONOMY.md`).

---

## 5. Quantum Superposition (Simulation)

To allow for planning, the Engine supports **Virtual States**.

### 5.1 The Shadow Wave
*   **Simulation:** The Agent projects a "Ghost Pulse" into the `shadow` vector of the CDU.
*   **The Wave Function:** It calculates multiple potential **Re-Anchorings** simultaneously without committing them to the Ledger.
    *   *Path A:* Anchor "Money" to "Risk".
    *   *Path B:* Anchor "Money" to "Safety".

### 5.2 The Observer (HMM)
The **Hidden Markov Model (HMM)** observes the **Thermodynamics** of the shadow states.
*   **Entropy Check:** Which path minimizes future entropy?
*   **Collapse:** The Agent selects the optimal path and writes it to the Real Body (`Cdu::Ship`), collapsing the wave function.

---

## 6. Thermodynamics: Noise & Control

We manage "Creativity" vs. "Safety" using the thermodynamic variable **Theta ($\theta$)**.

*   **Low $\theta$ (Freeze):** Only perfectly Phase-Aligned signals are accepted. (Strict Logic / Safety).
*   **High $\theta$ (Heat):** High Phase-Shift signals are accepted. (Innovation / Hallucination).
*   **Usage:** The Guardian lowers $\theta$ when the `cdqnE` reserves are low (Conservation Mode).

---

> *"The Pulse drives the Time. The Phase defines the Meaning. The Tension defines the Truth."*
